# README Verifier Configuration - Multi-OS Edition

# Environments to test against
environments:
  - name: macos
    runner: macos-latest
    enabled: true
    shell: bash
  
  - name: ubuntu
    runner: ubuntu-latest
    enabled: true
    shell: bash
  
  - name: windows
    runner: windows-latest
    enabled: true
    shell: pwsh  # PowerShell for Windows

# Verification settings
settings:
  # How often to run verification (cron syntax)
  schedule: "0 2 * * *"  # Daily at 2 AM UTC
  
  # Default timeout for steps (ms)
  defaultTimeout: 60000
  
  # Maximum total verification time (ms)
  maxVerificationTime: 600000  # 10 minutes
  
  # Stop on first failure?
  stopOnFailure: false  # Changed to false for multi-OS (continue even if one OS fails)
  
  # Create GitHub issues on failure?
  createIssues: true
  
  # Badge settings
  badges:
    enabled: true
    location: "top"  # "top" or "bottom" of README
    style: "flat"    # shields.io style: flat, flat-square, plastic, for-the-badge
    multiOS: true    # Enable multi-OS badges

# Multi-OS specific settings
multiOS:
  # Run tests in parallel or sequential
  parallel: true
  
  # Fail workflow if any OS fails
  failFast: false
  
  # Which OS to use for updating README (avoid conflicts)
  primaryOS: "macos"
  
  # Generate combined results
  generateCombinedResults: true
  
  # Per-OS result files
  perOSResults: true

# Notification settings
notifications:
  # Create issues for failures
  issues:
    enabled: true
    labels:
      - "readme-verification"
      - "documentation"
      - "bug"
      - "multi-os"  # Added multi-os label
  
  # Future: Add Slack, email, etc.
  # slack:
  #   enabled: false
  #   webhook: ""

# Step execution
execution:
  # Execute steps sequentially (vs parallel)
  sequential: true
  
  # Preserve environment between steps
  preserveEnv: true
  
  # Working directory for all steps (unless overridden)
  workingDir: "."
  
  # Cross-platform compatibility
  crossPlatform:
    # Normalize line endings
    normalizeLineEndings: true
    
    # Handle path separators automatically
    normalizePathSeparators: true

# Results storage
storage:
  # Where to save results (per-OS)
  resultsPath: ".github/readme-verifier/results.json"
  
  # Combined results from all OSes
  combinedResultsPath: ".github/readme-verifier/combined-results.json"
  
  # Keep history of results?
  keepHistory: true
  historyPath: ".github/readme-verifier/history/"
  
  # How many historical results to keep
  historyLimit: 30
  
  # Per-OS history naming
  perOSHistoryFormat: "results-{OS}.json"  # e.g., results-macOS.json

# Security
security:
  # Allow network access during verification
  allowNetwork: true
  
  # Allowed commands (empty = all allowed)
  # Example: ["npm", "node", "git", "curl"]
  allowedCommands: []
  
  # Blocked commands (takes precedence over allowed)
  blockedCommands:
    - "rm -rf"
    - "sudo"
    - "chmod 777"
    - "del /f /s /q"  # Windows equivalent of rm -rf
    - "rmdir /s /q"   # Windows remove directory

# Advanced
advanced:
  # Use Docker for isolation (future feature)
  useDocker: false
  
  # Docker image to use
  dockerImage: "node:18"
  
  # Custom environment variables for verification
  envVars:
    NODE_ENV: "test"
    CI: "true"
  
  # Platform-specific settings
  platformSettings:
    macos:
      # macOS-specific environment variables
      envVars:
        HOMEBREW_NO_AUTO_UPDATE: "1"
    
    ubuntu:
      # Ubuntu-specific environment variables
      envVars:
        DEBIAN_FRONTEND: "noninteractive"
    
    windows:
      # Windows-specific environment variables
      envVars:
        MSYS_NO_PATHCONV: "1"  # Prevent Git Bash path conversion